\subsection{UPC Atomic Memory Operations \texttt{<}upc\_atomic.h\texttt{>}}
\index{\_\_UPC\_ATOMIC\_\_}
\index{upc\_atomic.h}

\npf This subsection provides the UPC parallel extensions of [ISO/IEC00 
    Sec 7.19].  All the characteristics of library functions described
    in [ISO/IEC00 Sec 7.1.4] apply to these as well.  Implementations
    that support this interface shall predefine the feature macro {\tt
    \_\_UPC\_ATOMIC\_\_} to the value 1.

\np The following requirements apply to all of the functions defined
    in this section.

\np When these functions are used to access a memory location in a given
    synchronization phase, atomicity is guaranteed if and only if no other
    mechanisms are used to access the same memory location in the same
    synchronization phase.

\subsubsection{Standard headers}

\np The standard header is

{\tt <upc\_atomic.h>}

\subsubsection{Atomic Memory Operations}

\paragraph{The {\tt upc\_amo\_op} functions}
\index{upc\_amo\_op}

{\bf Synopsis} 

\npf\vspace{-2.5em}
\begin{verbatim}
    #include <upc.h>
    #include <upc_atomic.h>
    void upc_amo_op<<X>>_<<T>>(shared <<TYPE>>* ptr,
         <<TYPE>> val, upc_op_t op);
\end{verbatim}

{\bf Description}

\np The function prototype above represents the 16 variations of the
    {\tt upc\_amo\_op{\em X}\_{\em T}} functions where {\tt{\em X}} has the
    following correspondence:
\begin{center}
\begin{tabular}{ll}
{\tt{\em X}} & {Shared Access Type} \\ \hline
{\tt S} & {Strict shared access} \\
{\tt R} & {Relaxed shared access} \\
\end{tabular}
\end{center}
    and {\tt{\em T}} and {\tt{\em TYPE}} have the following correspondences:
    \footnote{For example, if {\tt{\em T}} is {\tt U64}, then 
      {\tt{\em TYPE}} must be {\tt unsigned uint64\_t}.}
\begin{center}
\begin{tabular}{ll|ll}
{\tt{\em T}} & {\tt{\em TYPE}} \hspace*{1.5in} &
{\tt{\em T}} & {\tt{\em TYPE}} \\ \hline
{\tt I} & {\tt signed int} &
{\tt I32} & {\tt int32\_t} \\
{\tt U} & {\tt unsigned int} &
{\tt U32} & {\tt uint32\_t} \\
{\tt IL} & {\tt signed long} &
{\tt I64} & {\tt int64\_t} \\
{\tt UL} & {\tt unsigned long} &
{\tt U64} & {\tt uint64\_t} \\
\end{tabular}
\end{center}
    
\np On completion of the {\tt upc\_amo\_op} variants, the value of the
    {\tt{\em TYPE}} shared object referenced by {\tt ptr} is 
    {\tt *ptr} $\oplus$ {\tt val} where ``$\oplus$'' is the operator
    specified by the variable {\tt op}.

\np The operator specified by the variable {\tt op} may take the following
    values:
\begin{description}
\item[{\tt UPC\_ADD}] Addition.
\item[{\tt UPC\_AND}] Bitwise {\tt AND}
\item[{\tt UPC\_OR}] Bitwise {\tt OR}
\item[{\tt UPC\_XOR}] Bitwise {\tt XOR}
\item[{\tt UPC\_MAX}] Maximum.
\item[{\tt UPC\_MIN}] Minimum.
\end{description}

\np EXAMPLE 1 {\tt upc\_amo\_op} of type relaxed {\tt int32\_t UPC\_XOR}.
\begin{verbatim}
  #include <upc.h>
  #include <upc_atomic.h>
  shared int32_t i = 0;
  upc_amo_opR_I32(i, 1, UPC_XOR);
\end{verbatim}
